<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>zero2one</title>
    <script>
      const userPrefersDark =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches;
      const userSetting = window.localStorage.getItem('theme');
      window.current = userSetting || 'system';

      const styles = document.querySelectorAll('.styles');
      const setCss = (theme) => {
        styles.forEach((s) => {
          if (theme === s.dataset.theme) {
            s.removeAttribute('disabled');
          } else {
            s.setAttribute('disabled', 'true');
          }
        });
      };

      if ((userPrefersDark && !userSetting) || 'dark' === userSetting) {
        document.documentElement.classList.add('dark');
        setCss('dark');
      } else {
        setCss('light');
      }
    </script>
  </head>
  <body>
    <div class="container">
      <img
        id="logo"
        src="https://raw.githubusercontent.com/lemon3/zero2one/main/_assets/images/zero2one.svg"
        alt="zero2one"
      />
      <div class="main">
        <div class="demo-box" id="demo1">
          <h2>demo 1</h2>
          <div class="number-ani">
            <span>time (0 to 1): </span>
            <span
              id="d1"
              class="ani"
              data-startval="0"
              data-endval="1"
              data-duration="2000"
              data-decimal-places="2"
            ></span>
          </div>
          <div class="number-ani">
            <span>year (1972 to 2024): </span>
            <span
              id="d2"
              class="ani"
              data-startval="1972"
              data-endval="2024"
              data-duration="2000"
              data-decimal-places="0"
            ></span>
          </div>
          <div class="number-ani">
            <span>number (from 321 to 123): </span>
            <span
              id="d3"
              class="ani"
              data-startval="321"
              data-endval="123"
              data-duration="2000"
              data-decimal-places="0"
            ></span>
          </div>
        </div>

        <div class="demo-box" id="demo2">
          <h2>demo 2</h2>
          <div class="bars">
            <h3>linear</h3>
            <div class="bar">
              <div
                class="d2 bar-inner bg-red"
                data-endval="100"
                data-ease="linear"
                data-duration="2000"
              ></div>
            </div>
            <h3>easeIn</h3>
            <div class="bar">
              <div
                class="d2 bar-inner bg-orange"
                data-endval="100"
                data-ease="easeIn"
                data-duration="2000"
              ></div>
            </div>
            <h3>easeOut</h3>
            <div class="bar">
              <div
                class="d2 bar-inner bg-yellow"
                data-endval="100"
                data-ease="easeOut"
                data-duration="2000"
              ></div>
            </div>
            <h3>easeInOut</h3>
            <div class="bar">
              <div
                class="d2 bar-inner bg-green"
                data-endval="100"
                data-ease="easeInOut"
                data-duration="2000"
              ></div>
            </div>
            <h3>cubicEaseIn</h3>
            <div class="bar">
              <div
                class="d2 bar-inner bg-blue"
                data-endval="100"
                data-ease="cubicEaseIn"
                data-duration="2000"
              ></div>
            </div>
            <h3>cubicEaseOut</h3>
            <div class="bar">
              <div
                class="d2 bar-inner bg-indigo"
                data-endval="100"
                data-ease="cubicEaseOut"
                data-duration="2000"
              ></div>
            </div>
            <h3>sineEaseIn</h3>
            <div class="bar">
              <div
                class="d2 bar-inner bg-violet"
                data-endval="100"
                data-ease="sineEaseIn"
                data-duration="2000"
              ></div>
            </div>
            <h3>sineEaseOut</h3>
            <div class="bar">
              <div
                class="d2 bar-inner bg-turquoise"
                data-endval="100"
                data-ease="sineEaseOut"
                data-duration="2000"
              ></div>
            </div>
            <h3>bounceOut</h3>
            <div class="bar">
              <div
                class="d2 bar-inner bg-pink"
                data-endval="100"
                data-ease="bounceOut"
                data-duration="2000"
              ></div>
            </div>
          </div>
        </div>

        <div class="demo-box" id="demo3">
          <h2>demo 3</h2>
          <div class="box-wrapper">
            <div class="d3 box bg-blue"></div>
          </div>
        </div>

        <div class="demo-box" id="demo4">
          <h2>demo 4</h2>
          <div>
            <input
              id="d4"
              type="text"
              value=""
              placeholder="enter a number ..."
            />
            <div id="d4-result">0</div>
          </div>
        </div>
      </div>
    </div>
    <div id="modeSwitch"></div>
    <script type="module" src="./src/index.ts"></script>
    <script>
      const icons = {
        dark: '<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m21.996 12.882c.022-.233-.038-.476-.188-.681-.325-.446-.951-.544-1.397-.219-.95.693-2.06 1.086-3.188 1.162-1.368.092-2.765-.283-3.95-1.158-1.333-.985-2.139-2.415-2.367-3.935s.124-3.124 1.109-4.456c.142-.191.216-.435.191-.691-.053-.55-.542-.952-1.092-.898-2.258.22-4.314 1.18-5.895 2.651-1.736 1.615-2.902 3.847-3.137 6.386-.254 2.749.631 5.343 2.266 7.311s4.022 3.313 6.772 3.567 5.343-.631 7.311-2.266 3.313-4.022 3.567-6.772zm-2.429 1.792c-.49 1.363-1.335 2.543-2.416 3.441-1.576 1.309-3.648 2.016-5.848 1.813s-4.108-1.278-5.417-2.854-2.016-3.648-1.813-5.848c.187-2.032 1.117-3.814 2.507-5.106.782-.728 1.71-1.3 2.731-1.672-.456 1.264-.577 2.606-.384 3.899.303 2.023 1.38 3.934 3.156 5.247 1.578 1.167 3.448 1.668 5.272 1.545.752-.05 1.496-.207 2.21-.465z"/></svg>',
        light:
          '<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m18 12c0-1.657-.673-3.158-1.757-4.243s-2.586-1.757-4.243-1.757-3.158.673-4.243 1.757-1.757 2.586-1.757 4.243.673 3.158 1.757 4.243 2.586 1.757 4.243 1.757 3.158-.673 4.243-1.757 1.757-2.586 1.757-4.243zm-2 0c0 1.105-.447 2.103-1.172 2.828s-1.723 1.172-2.828 1.172-2.103-.447-2.828-1.172-1.172-1.723-1.172-2.828.447-2.103 1.172-2.828 1.723-1.172 2.828-1.172 2.103.447 2.828 1.172 1.172 1.723 1.172 2.828zm-5-11v2c0 .552.448 1 1 1s1-.448 1-1v-2c0-.552-.448-1-1-1s-1 .448-1 1zm0 20v2c0 .552.448 1 1 1s1-.448 1-1v-2c0-.552-.448-1-1-1s-1 .448-1 1zm-7.487-16.073 1.42 1.42c.391.391 1.024.391 1.414 0s.391-1.024 0-1.414l-1.42-1.42c-.391-.391-1.024-.391-1.414 0s-.391 1.024 0 1.414zm14.14 14.14 1.42 1.42c.391.391 1.024.391 1.414 0s.391-1.024 0-1.414l-1.42-1.42c-.391-.391-1.024-.391-1.414 0s-.391 1.024 0 1.414zm-16.653-6.067h2c.552 0 1-.448 1-1s-.448-1-1-1h-2c-.552 0-1 .448-1 1s.448 1 1 1zm20 0h2c.552 0 1-.448 1-1s-.448-1-1-1h-2c-.552 0-1 .448-1 1s.448 1 1 1zm-16.073 7.487 1.42-1.42c.391-.391.391-1.024 0-1.414s-1.024-.391-1.414 0l-1.42 1.42c-.391.391-.391 1.024 0 1.414s1.024.391 1.414 0zm14.14-14.14 1.42-1.42c.391-.391.391-1.024 0-1.414s-1.024-.391-1.414 0l-1.42 1.42c-.391.391-.391 1.024 0 1.414s1.024.391 1.414 0z"/></svg>',
        system:
          '<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m21 14.016v-10.031h-18v10.031zm0-12q.797 0 1.406.586t.609 1.383v12q0 .797-.609 1.406t-1.406.609h-6.984l1.969 3v.984h-7.969v-.984l1.969-3h-6.984q-.797 0-1.406-.609t-.609-1.406v-12q0-.797.609-1.383t1.406-.586h18z"/></svg>',
      };

      let doc, modeSwitch;

      const change = (value) => {
        window.current = value;
        modeSwitch.title = window.current;
        modeSwitch.innerHTML = icons[window.current];

        if ('light' === window.current) {
          doc.classList.remove('dark');
          window.localStorage.theme = 'light';
          setCss('light');
        } else if ('dark' === window.current) {
          doc.classList.add('dark');
          window.localStorage.theme = 'dark';
          setCss('dark');
        } else {
          if (userPrefersDark) {
            doc.classList.add('dark');
          } else {
            doc.classList.remove('dark');
          }
          window.localStorage.removeItem('theme');
        }
      };

      const appStart = () => {
        doc = document.documentElement;
        modeSwitch = document.querySelector('#modeSwitch');

        const modes = ['light', 'dark', 'system'];
        let currentIndex = modes.indexOf('' + window.current);

        modeSwitch.title = window.current;
        modeSwitch.innerHTML = icons[window.current];
        modeSwitch.addEventListener('click', () => {
          change(modes[++currentIndex % 3]);
        });
        modeSwitch.style.display = 'block';
      };

      if (
        'complete' === document.readyState ||
        'interactive' === document.readyState
      ) {
        appStart();
        document.removeEventListener('DOMContentLoaded', appStart);
      } else {
        document.addEventListener('DOMContentLoaded', appStart, false);
      }
    </script>
  </body>
</html>
